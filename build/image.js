"use strict";var _extends=Object.assign||function(e){for(var r=1;r<arguments.length;r++){var t=arguments[r];for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])}return e},omit=require("lodash/omit"),React=require("react"),ReactDOM=require("react-dom"),pt=require("prop-types"),qs=require("query-string"),createReactClass=require("create-react-class"),PropTypes=pt,DEFAULT_PROPS={usePlaceholder:!1,placeholder:{theme:"vine",auto:!0}},Img=createReactClass({propTypes:{src:PropTypes.string.isRequired,usePlaceholder:PropTypes.bool,placeholder:PropTypes.object},getDefaultProps:function(){return DEFAULT_PROPS},render:function(){var e=this.props,r=this.props,t=r.width,o=r.height,s=omit(e,"src","usePlaceholder","placeholder");if(e.usePlaceholder){var a=qs.stringify(e.placeholder),i="holder.js/"+t+"x"+o+"?"+a,n=omit(s,"width","height");return React.createElement("img",_extends({},n,{ref:"placeholder","data-src":i}))}return React.createElement("img",_extends({},s,{src:e.src}))},componentDidMount:function(){this._initPlaceholderImage()},componentDidUpdate:function(){this._initPlaceholderImage()},_initPlaceholderImage:function(){if("undefined"!=typeof window&&window.document&&this.props.usePlaceholder){var e=ReactDOM.findDOMNode(this.refs.placeholder),r=require("holderjs");r.run({domain:"holder.js",images:e,object:null,bgnodes:null,stylenodes:null})}}});Img.DEFAULT_PROPS=DEFAULT_PROPS,module.exports=Img;